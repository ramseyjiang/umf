(this.webpackJsonpumf=this.webpackJsonpumf||[]).push([[0],{12:function(e,t,a){"use strict";a.d(t,"b",(function(){return y}));var n=a(13),r=a.n(n),c=a(29),o=a(9),l=a(0),s=a.n(l),u=a(6),i=a(20),m={isLoggedIn:!1,loading:!1,error:null,token:null};function d(e,t){switch(t.type){case"INIT":return p();case"LOADING":return Object(u.a)({},e,{loading:!0});case"SUCCESS":return b(t);case"FAIL":return f(t);case"LOGOUT":return g();default:return e}}var p=function(){var e=Object(i.a)("token");return Object(u.a)({},m,{isLoggedIn:null!==e,token:e})},b=function(e){return Object(i.c)("token",e.data.access_token),Object(i.c)("isAdmin",e.data.isAdmin),Object(u.a)({},m,{isLoggedIn:!0,token:e.data.access_token})},f=function(e){return h(),Object(u.a)({},m,{error:e.error})},g=function(){return h(),Object(u.a)({},m)},h=function(){Object(i.b)("token"),Object(i.c)("isAdmin")},E=a(14),v="http://13.210.14.131/um/public/index.php/api/",j="https://cors-anywhere.herokuapp.com/",O=Object(l.createContext)(),y=function(){return Object(l.useContext)(O)};t.a=function(e){var t=e.children,a=Object(l.useReducer)(d,m),n=Object(o.a)(a,2),u=n[0],i=n[1];Object(l.useEffect)((function(){null===u.username&&i({type:"INIT"})}),[u.username]);var p=function(){return i({type:"LOADING"})},b=Object(l.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(E.b)("post",j+v+"register",t).then((function(e){"ok"===e.status?i({type:"SUCCESS",data:e}):i({type:"FAIL",error:e.errors})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),f=Object(l.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(E.b)("post",j+v+"login",t).then((function(e){"ok"===e.status?i({type:"SUCCESS",data:e}):i({type:"FAIL",error:e.errors})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),g=Object(l.useCallback)((function(){Object(E.a)(j+v+"logout").then((function(e){i({type:"LOGOUT",data:e})}))}),[]),h=Object(l.useMemo)((function(){return{state:u,loading:p,logout:g,register:b,login:f}}),[g,b,f,u]);return s.a.createElement(O.Provider,{value:{authApi:h}},t)}},14:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return s}));var n=a(13),r=a.n(n),c=a(29),o=a(20),l=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"post",a=l.length>1?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:null,e.prev=3,e.next=6,fetch(a,{method:t,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(Object(o.a)("token"))},body:JSON.stringify(n)});case 6:return c=e.sent,e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}()},17:function(e,t,a){"use strict";var n=a(9),r=a(0),c=a.n(r),o=a(30),l=function(e){var t=e.name,a=e.type,l=e.placeholder,s=e.onChange,u=(e.onBlur,e.min),i=e.max,m=(e.error,e.label),d=(e.multiple,e.disabled),p=e.value,b=Object(r.useState)(!1),f=Object(n.a)(b,2),g=f[0],h=f[1];return c.a.createElement(o.a.Group,null,c.a.createElement(o.a.Label,{htmlFor:t},m),c.a.createElement(o.a.Control,{type:g?"text":a,placeholder:l,minLength:u,maxLength:i,name:t,value:p,onChange:s,disabled:d,required:!0}),"password"===t&&c.a.createElement(o.a.Check,{type:"checkbox",label:g?"Hide password":"Show password",onClick:function(e){h(!1===g)}}))};l.defaultProps={name:"name",type:"text",placeholder:"",onChange:function(){},onBlur:function(){},min:6,max:100,error:"",label:"",multiple:!1,disabled:!1,value:""},t.a=l},20:function(e,t,a){"use strict";function n(e){return localStorage.getItem(e)}function r(e,t){return localStorage.setItem(e,t)}function c(e){localStorage.removeItem(e)}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c}))},28:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(85);t.a=function(){return r.a.createElement("div",{className:"text-center loading"},r.a.createElement(c.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}},33:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(26),r=a(6),c=a(9),o=a(0),l=a.n(o),s=a(84),u=a(86),i=a(30),m=a(87),d=a(17),p=a(12),b=a(37),f=a(28);function g(e){var t=Object(p.b)().authApi,a=Object(b.b)().userApi,g=Object(o.useState)(a.state.user),h=Object(c.a)(g,2),E=h[0],v=h[1],j=function(e){var t="is_admin"!==e.target.name?e.target.value:e.target.checked;v(Object(r.a)({},E,Object(n.a)({},e.target.name,t)))};return l.a.createElement(l.a.Fragment,null,t.state.loading&&l.a.createElement(f.a,null),!t.state.loading&&l.a.createElement(s.a,{className:e.isModal?"justify-content-center bg-light rounded":"justify-content-center col-6 register bg-light rounded"},t.state.error&&l.a.createElement(u.a,{variant:"danger"},t.state.error),l.a.createElement(i.a,{onSubmit:function(n){n.preventDefault(),"INIT"===a.state.operate?(t.loading(),t.register(E)):("CREATE"===a.state.operate?a.createUser(E):a.updateUser(E),e.hideModal())},method:"post",className:"auth-padding"},l.a.createElement(d.a,{placeholder:"Please input username",type:"text",label:"Username",name:"username",min:"2",max:"16",value:E.username,onChange:j,disabled:"Update"===a.state.operate}),l.a.createElement(i.a.Check,{type:"checkbox",label:"Is an admin?",name:"is_admin",checked:1===E.is_admin?"checked":null,onChange:j}),l.a.createElement(d.a,{placeholder:"Please input first name",type:"text",label:"First Name",name:"first_name",min:"2",max:"16",value:E.first_name,onChange:j}),l.a.createElement(d.a,{placeholder:"Please input last name",type:"text",label:"Last Name",name:"last_name",min:"2",max:"16",value:E.last_name,onChange:j,disabled:"Update"===a.state.operate}),l.a.createElement(d.a,{placeholder:"Please input email",type:"email",label:"Email",name:"email",value:E.email,onChange:j}),l.a.createElement(d.a,{placeholder:"Please input password",type:"password",label:"Password",name:"password",min:"6",max:"16",value:E.password,onChange:j}),l.a.createElement(m.a,{variant:"primary",type:"submit",className:"btn btn-sm"},"Submit"))))}},37:function(e,t,a){"use strict";a.d(t,"b",(function(){return j}));var n=a(9),r=a(0),c=a.n(r),o=a(66),l=a(6),s=a(65),u=a.n(s),i={counter:0,operate:"INIT",user:{username:"",is_admin:!1,first_name:"",last_name:"",email:"",password:""},listUsers:[]},m=function(e,t){switch(t.type){case"INIT":return d(e,t);case"LIST":return Object(l.a)({},e,{counter:t.data.length,listUsers:t.data});case"CREATE":return p(e,t);case"UPDATE":return f(e,t);case"DELETE":return b(e,t);default:return e}},d=function(e,t){return Object(l.a)({},e,{user:t.user,operate:t.operate})},p=function(e,t){return{counter:++e.counter,user:Object(l.a)({},t.user,{id:u()()}),listUsers:[].concat(Object(o.a)(e.listUsers),[t.user])}},b=function(e,t){return{counter:e.counter-1,user:t.user,listUsers:e.listUsers.filter((function(e){return e.id!==t.userId}))}},f=function(e,t){return{counter:e.counter,user:t.user,listUsers:e.listUsers.map((function(e){return e.id===t.user.id?t.user:e}))}},g=a(14),h="http://13.210.14.131/um/public/index.php/api/",E="https://cors-anywhere.herokuapp.com/",v=Object(r.createContext)(),j=function(){return Object(r.useContext)(v)};t.a=function(e){var t=e.children,a=Object(r.useReducer)(m,i),o=Object(n.a)(a,2),l=o[0],s=o[1],u=Object(r.useCallback)((function(e){return s({type:"INIT",user:i.user,operate:"CREATE"})}),[]),d=Object(r.useCallback)((function(){Object(g.a)(E+h+"list").then((function(e){s({type:"LIST",data:e})}))}),[]),p=Object(r.useCallback)((function(e){return s({type:"INIT",user:e,operate:"UPDATE"})}),[]),b=Object(r.useCallback)((function(e){Object(g.b)("post",E+h+"create",e).then((function(e){Object(g.a)(E+h+"list").then((function(e){s({type:"LIST",data:e})}))}))}),[]),f=Object(r.useCallback)((function(e){Object(g.b)("put",E+h+"update/"+e.id,e).then((function(t){return s({type:"UPDATE",user:e})}))}),[]),j=Object(r.useCallback)((function(e){Object(g.b)("delete",E+h+"delete/"+e).then((function(e){return s({type:"DELETE",data:e})}))}),[]),O=Object(r.useMemo)((function(){return{state:l,initUser:u,editUser:p,createUser:b,deleteUser:j,updateUser:f,getUserList:d}}),[l,u,p,b,j,f,d]);return c.a.createElement(v.Provider,{value:{userApi:O}},t)}},68:function(e,t,a){e.exports=a(83)},74:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),o=a.n(c),l=(a(73),a(74),a(16)),s=a(84),u=a(9),i=a(89),m=a(90),d=a(12),p=function(){var e=Object(d.b)().authApi,t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1],s=e.state.isLoggedIn?"primary":"dark";return r.a.createElement(i.a,{expanded:c,fixed:"top",expand:"sm",bg:s,variant:"dark"},r.a.createElement(i.a.Brand,{href:"/"},"UserManagement"),r.a.createElement(i.a.Toggle,{onClick:function(){return o(!c&&"expanded")},"aria-controls":"basic-navbar-nav"}),r.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(m.a,{className:"mr-auto"},r.a.createElement(l.b,{exact:!0,className:"nav-link",to:"/",onClick:function(){return o(!1)}},"Home"),r.a.createElement(l.b,{className:"nav-link",to:"/users",onClick:function(){return o(!1)}},"Users")),!e.state.isLoggedIn&&r.a.createElement(m.a,null,r.a.createElement(l.b,{exact:!0,to:"/login",className:"nav-link"},"Login"),r.a.createElement(l.b,{exact:!0,to:"/register",className:"nav-link"},"Register")),e.state.isLoggedIn&&r.a.createElement(m.a,null,r.a.createElement(l.b,{to:"/",onClick:function(){return e.logout()},className:"nav-link"},"Logout"))))},b=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,null))};var f=a(50),g=function(){return r.a.createElement("div",{className:"font-small bg-dark"},r.a.createElement("div",{className:"text-center text-white py-1"},"\xa9 ",(new Date).getDate(),"/",function(){var e=(new Date).getMonth()+1;return e>=10?e:"0"+e}(),"/",(new Date).getFullYear()," Copyright:",r.a.createElement("label",{htmlFor:"footer"},"Ramsey Jiang")," "," ",r.a.createElement("a",{href:"https://github.com/ramseyjiang/",rel:"noopener noreferrer",target:"_blank",className:"link-icon-color"},r.a.createElement(f.a,null))," "," ",r.a.createElement("a",{href:"https://www.linkedin.com/in/ramsey-jiang-360950101",target:"_blank",rel:"noopener noreferrer",className:"link-icon-color"},r.a.createElement(f.b,null))))},h=a(67),E=a(21),v=a(91),j=function(){var e={0:"Allow User to Sign Up \u2014> Any one can sign up",1:"Allow Signed Up Users to be able to login. ",2:"Allow Logged in users to log out.",3:"List Users \u2014> Any user (both Admin and normal user) can see list of users (provided they are logged in).",4:"Update a user \u2014> Only an Admin User can Update any user's details (provided the Admin is logged in).",5:"Delete a user \u2014> Only an Admin User can Delete any user (provided the Admin is logged in).",6:"Fields you should have against the User table are : id, email, username, firstName, lastName  password, created_at, updated_at, is_admin \u2014> Required Fields",7:"The fields created_at, updated_at should record Date and time as to when the record was created and updated.",8:"Rebuild the Laravel auth default, make a user can login using username and password.",9:"Deploy codes on AWS for preview and upload codes to GitHub for review."},t={0:"success",1:"danger",2:"warning",3:"info",4:"dark"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{className:"home rounded"},r.a.createElement("h3",{className:"text-center"},"User Stories"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(v.a,null,Object.keys(e).map((function(a,n){return r.a.createElement(v.a.Item,{key:n,variant:t[a%5]},e[a])})))))))},O=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null))},y=a(26),k=a(6),w=a(86),x=a(30),C=a(87),U=a(28),I=a(17);function N(){var e=Object(d.b)().authApi,t=Object(n.useState)({username:"",password:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=function(e){o(Object(k.a)({},c,Object(y.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,e.state.loading&&r.a.createElement(U.a,null),!e.state.loading&&r.a.createElement(s.a,{className:"justify-content-center col-6 login bg-light rounded"},e.state.error&&r.a.createElement(w.a,{variant:"danger"},e.state.error),r.a.createElement(x.a,{onSubmit:function(t){e.loading(),t.preventDefault(),e.login(c)},method:"post",className:"auth-padding"},r.a.createElement(I.a,{placeholder:"Please input username",type:"text",label:"Username",name:"username",min:"2",max:"16",value:c.username,onChange:l,required:"true"}),r.a.createElement(I.a,{placeholder:"Please input password",type:"password",label:"Password",name:"password",min:"6",max:"16",value:c.password,onChange:l,required:"true"}),r.a.createElement(C.a,{variant:"primary",type:"submit",className:"btn btn-sm"},"Login"))))}var A=a(33),L=Object(n.lazy)((function(){return a.e(4).then(a.bind(null,95))})),S=Object(n.lazy)((function(){return Promise.all([a.e(3),a.e(5)]).then(a.bind(null,98))})),T=function(){var e=Object(d.b)().authApi,t=function(t){var a=t.component,n=Object(h.a)(t,["component"]);if(a===N&&e.state.isLoggedIn)return r.a.createElement(E.a,{to:"/umf"});if(a===A.a&&e.state.isLoggedIn)return r.a.createElement(E.a,{to:"/umf"});if(a!==A.a||e.state.isLoggedIn){var c=e.state.isLoggedIn?a:N;return r.a.createElement(E.b,Object.assign({},n,{component:c}))}return r.a.createElement(E.b,Object.assign({},n,{component:A.a}))};return r.a.createElement(n.Suspense,{fallback:r.a.createElement(U.a,null)},r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/umf",component:O}),r.a.createElement(t,{path:"/login",component:N}),r.a.createElement(t,{path:"/register",component:A.a}),r.a.createElement(E.b,{path:"/users",component:S}),r.a.createElement(E.b,{component:L})))},_=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement(s.a,{fluid:!0},r.a.createElement(T,null)),r.a.createElement(g,null))},D=a(37),P=function(){return r.a.createElement(l.a,null,r.a.createElement(d.a,null,r.a.createElement(D.a,null,r.a.createElement(_,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.b2628ff3.chunk.js.map